{% extends 'core/base_head.html' %}

{% load staticfiles %}

{% block content %}
    <h1>Dashboard</h1>
    <section>
        <a href="/seton">Set Heating On</a><br/><br/>
        <a href="/setoff">Set Heating Off</a><br/><br/>
        {% if viewdata %}
            <ul>
            {% for controller in viewdata.controllers %}

                <li><h2>{{ controller.name }}</h2>
                    <ul>
                    {% for device in controller.devices %}
                        {% if device.vendor and device.brand %}
                            <li><h3>{{ device.name }}</h3>
                                {% if device.sensors|length > 0 %}
                                    <h4>Sensors:</h4>
                                    <ul>
                                    {% for sensor in device.sensors %}
                                        <li>{{ sensor.name }}<br />{{ sensor.value }}</li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}
                                {% if device.actuators|length > 0 %}
                                    <h4>Actuators:</h4>
                                    <ul>
                                    {% for actuator in device.actuators %}
                                        <li>{{ actuator.name }}<br />{{ actuator.value }}</li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}
                            </li>
                        {% endif %}
                    {% endfor %}
                    </ul>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No controllers available.</p>
        {% endif %}
    </section>
{% endblock %}
